<div class="row ml-3">
 
  <main class="col-md-8 nopadding text-center">
    <div class="mt-4 mb-3">
      <h3 class="d-inline">{{sectionTitle}}</h3>
    </div>
    <mat-radio-group aria-label="Select an option">
      <mat-radio-button value="1" checked (change)="radioChange('role')">Create Role</mat-radio-button>
      <mat-radio-button value="2" (change)="radioChange('permission')">Create Permissions</mat-radio-button>
    </mat-radio-group>
   <div *ngIf="currentSection === 'role'">
    <form [formGroup]="roleForm" (ngSubmit)="onSubmit(formDirective)" #formDirective="ngForm">
      <div class="row">
          <div class="col-md-12">
              <mat-form-field class="full-width-input mt-2">
                  <input matInput placeholder="Role" formControlName="role_type" >
                  <mat-error>
                      Please provide valid role type
                  </mat-error>
              </mat-form-field>
          </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="full-width-input mt-2">
              <input matInput placeholder="Role Description" formControlName="role_description" >
              <mat-error>
                  Please provide valid role description
              </mat-error>
          </mat-form-field>
      </div>
      </div>
      <div class="row">
        <div class="col-md-12">
            <mat-form-field class="full-width-input mt-2">
                <mat-label>Immediate Superior</mat-label>
                <mat-select matNativeControl formControlName="parent">
                    <mat-option *ngFor="let item of roles" value="{{item?.ID}}">{{item?.ROLE_TYPE}}
                    </mat-option>
                </mat-select>
                <mat-error>
                    Please select value
                </mat-error>
            </mat-form-field>
        </div>
    </div>
    <div class="row">
      <div class="col-md-12">
          <mat-form-field class="full-width-input mt-2">
              <mat-label>Permissions</mat-label>
              <mat-select matNativeControl formControlName="permission">
                  <mat-option *ngFor="let item of permissions" value="{{item?.ID}}">{{item?.PERMISSION_CODE}}
                  </mat-option>
              </mat-select>
              <mat-error>
                  Please select value
              </mat-error>
          </mat-form-field>
      </div>
  </div>
      <div class="row text-center mb-3">
          <div class="col-md-12">
          <button type="submit" class="mt-3 mr-2" mat-raised-button color="primary">Create Role</button>
      </div>
      </div>
  </form>
   </div>
   <div *ngIf="currentSection === 'permission'">
    <form [formGroup]="permissionForm" (ngSubmit)="onPermissionSubmit(permisionformDirective)" #permisionformDirective="ngForm">
      <div class="row">
          <div class="col-md-12">
              <mat-form-field class="full-width-input mt-2">
                  <input matInput placeholder="Permision Code" formControlName="permission_code" >
                  <mat-error>
                      Please provide Permission Code 
                  </mat-error>
              </mat-form-field>
          </div>
      </div>
      <div class="row">
        <div class="col-md-12">
            <mat-form-field class="full-width-input mt-2">
                <input matInput placeholder="Permision Description" formControlName="permission_desc" >
                <mat-error>
                    Please provide Permission Description 
                </mat-error>
            </mat-form-field>
        </div>
    </div>
      <div class="row text-center mb-3">
          <div class="col-md-12">
          <button type="submit" class="mt-3 mr-2" mat-raised-button color="primary">Create Permission</button>
      </div>
      </div>
  </form>
   </div>

  </main>
  <div class="col-md-4 nopadding">
    <h3 class="d-inline">Tree View</h3>
    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
      <!-- This is the tree node template for leaf nodes -->
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
        <li class="mat-tree-node">
          <!-- use a disabled button to provide padding for tree leaf -->
          <button mat-icon-button disabled></button>
          {{node.value.ROLE_TYPE}}
        </li>
      </mat-tree-node>
      <!-- This is the tree node template for expandable nodes -->
      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
        <li>
          <div class="mat-tree-node">
            <button mat-icon-button matTreeNodeToggle
                    [attr.aria-label]="'Toggle ' + node.value.ROLE_TYPE">
              <mat-icon class="mat-icon-rtl-mirror">
                {{treeControl.isExpanded(node.value.ROLE_TYPE) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>
            {{node.value.ROLE_TYPE}}
          </div>
          <ul [class.example-tree-invisible]="!treeControl.isExpanded(node.value.ROLE_TYPE)">
            <ng-container matTreeNodeOutlet></ng-container>
          </ul>
        </li>
      </mat-nested-tree-node>
    </mat-tree>
    
  </div>
</div>